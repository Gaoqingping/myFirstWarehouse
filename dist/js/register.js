"use strict";var str="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXTZ0123456789";console.log($('[name="agr"]').attr("checked"));var phone=$("#phone"),prompt1=$("#prompt1");phone.focus(function(){$("#div1").show(),phone.css("borderColor","#67a1e2"),prompt1.text("请输入账号")}),phone.blur(function(){phone.css("borderColor","#ddd"),""==this.value?prompt1.text("账号不能为空"):$("#div1").hide()});var pwd=$("#password"),prompt=$("#prompt3"),rag3=/^\w{8,20}$/,rag4=/^\d{8,20}$/,rag5=/^[A-z0-9]{8,10}$/,rag6=/^[A-z0-9]{10,19}$/;pwd.focus(function(){$("#div3").show(),pwd.css("borderColor","#67a1e2"),$("#div3").css("width",216),prompt.text("请设置登录密码"),$("#grade1").css("backgroundColor","#F1D0B9"),$("#grade2").css("backgroundColor","#F1D0B9"),$("#grade3").css("backgroundColor","#F1D0B9")}),pwd.blur(function(){pwd.css("backgroundColor","#ddd"),""==this.value?(prompt.text("请设置登录密码"),$("#div3").css("width",216)):1==rag3.test(this.value)?(1==rag4.test(this.value)&&(prompt.text("密码过于简单，有被盗风险"),$("#div3").css("width",216)),0==rag4.test(this.value)&&$("#div3").hide(),1==rag5.test(this.value)&&(1==rag4.test(this.value)?$("#grade1").css("backgroundColor","#ff893a"):($("#grade1").css("backgroundColor","#ff893a"),$("#grade2").css("backgroundColor","#ff893a"))),1==rag6.test(this.value)&&(1==rag4.test(this.value)?$("#grade1").css("backgroundColor","#ff893a"):($("#grade1").css("backgroundColor","#ff893a"),$("#grade2").css("backgroundColor","#ff893a"),$("#grade3").css("backgroundColor","#ff893a")))):(prompt.text("密码需为8-20个字符,由字母、数字和符号组成。"),$("#div3").css("width",300))});var pwds=$("#password1"),prompt4=$("#prompt4");function setVc(){for(var r="",e=1;e<=6;e++){var t=parseInt(Math.random()*str.length);-1===r.indexOf(str[t])?r+=str[t]:e--}return r}function register(){var arr=[];if(localStorage.user)for(e in arr=eval(localStorage.user),arr)if($('[name="username"]').val().trim()==arr[e].loginName)return alert("该账号已被注册"),void clear();var user={loginName:$('[name="username"]').val(),loginPsd:$('[name="userpwd1"]').val()};arr.push(user),localStorage.user=JSON.stringify(arr),alert("注册成功"),window.location.href="./login.html",clear()}function clear(){$('[name="username"]').val(""),$('[name="userpwd1"]').val(""),$('[name="userpwd2"]').val("")}pwds.focus(function(){$("#div4").show(),prompt4.text("请再次输入密码")}),pwds.blur(function(){""==this.value?prompt4.text("确认密码不能为空"):this.value==pwd.val()?$("#div4").hide():prompt4.text("您两次输入的密码不一致")}),null==$('[name="agr"]').attr("checked")?($("#btn").attr("disabled","true"),$("#btn").attr("disabled",!0),$("#btn").attr("disabled","disabled")):($("#btn").removeAttr("disabled"),$("#btn").attr("disabled",!1)),$('[name="vc2"]').html(setVc()).css("fontSize","20px"),$('[name="vc2"]').click(function(){$(this).html(setVc())}),$('[type="button"]').click(function(){$('[name="username"]').val(),$('[name="userpwd1"]').val(),$('[name="userpwd2"]').val();if($('[name="vc1"]').val().toLowerCase()!==$('[name="vc2"]').html().toLowerCase())return $("#div2").show(),$(".text").css("borderColor","#67a1e2"),$("#prompt2").text("验证码不正确"),!1;register()});